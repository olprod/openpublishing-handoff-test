{"nodes":[{"content":"A/B Testing","pos":[2,13]},{"pos":[15,93],"content":"<bpt id=\"p1\">**</bpt>Content Level A/B Testing:<ept id=\"p1\">**</ept> A/B testing on specific documents or resources."},{"pos":[95,255],"content":"<bpt id=\"p1\">**</bpt>Global Level A/B Testing:<ept id=\"p1\">**</ept> A/B testing on a wide scope, for example theme and page layout which applies to all articles in a given site (or specific locale)."},{"content":"Content Level A/B Testing","pos":[283,308]},{"pos":[309,494],"content":"<bpt id=\"p1\">*</bpt>Content Level A/B Testing<ept id=\"p1\">*</ept> allows <bpt id=\"p2\">**</bpt>content owners<ept id=\"p2\">**</ept> to self-service, having variants of contents delivered from the same URL, specifying the split ratio and getting the BI statistics."},{"pos":[496,664],"content":"For example, writers can have <bpt id=\"p1\">**</bpt>hello.md<ept id=\"p1\">**</ept> and <bpt id=\"p2\">**</bpt>hello.experimental.md<ept id=\"p2\">**</ept>, and specify that only 10% of the end users would see the experimental version of the document."},{"content":"Design Principles:","pos":[670,688]},{"pos":[693,807],"content":"Keep things <bpt id=\"p1\">**</bpt>simpler<ept id=\"p1\">**</ept> if possible, avoid over design - especially piling up features that are not actually used."},{"pos":[811,945],"content":"All <bpt id=\"p1\">**</bpt>types of contents<ept id=\"p1\">**</ept> should be able to run A/B testing, including markdown files, plain HTML files, images and audio/video files."},{"pos":[949,1077],"content":"The A/B testing <bpt id=\"p1\">**</bpt>granularity<ept id=\"p1\">**</ept> should be flexible, either covering a single document, or a large group of assets (e.g. images)."},{"pos":[1081,1319],"content":"Users should be <bpt id=\"p1\">**</bpt>affinitized<ept id=\"p1\">**</ept>, which means once a user was routed to version A, he/she should always see version A document unless the browser session info has been explicitly wiped out (e.g. Ctrl + Shift + Delete or InPrivate Session)."},{"pos":[1323,1470],"content":"Should be <bpt id=\"p1\">**</bpt>fast<ept id=\"p1\">**</ept>, creating a new test, turning on/off an A/B testing, or updating the split ratio should take effect in <bpt id=\"p2\">**</bpt>less than 30 seconds<ept id=\"p2\">**</ept>."},{"content":"<bpt id=\"p1\">**</bpt>Corner cases should be covered properly<ept id=\"p1\">**</ept>, A/B testing should work smoothly in a <bpt id=\"p2\">**</bpt>CDN environment<ept id=\"p2\">**</ept>.","pos":[1474,1577]},{"content":"Also, special logic should be in place to make sure only the default variant <bpt id=\"p1\">*</bpt>\"the A version\"<ept id=\"p1\">*</ept> is retrieved by <bpt id=\"p2\">**</bpt>search crawlers<ept id=\"p2\">**</ept> like Google and Bing.","pos":[1578,1730]},{"pos":[1734,1780],"content":"Naturally <bpt id=\"p1\">**</bpt>integrated<ept id=\"p1\">**</ept> into BI and Insights."},{"content":"Internal Flow Diagram:","pos":[1786,1808]},{"content":"Global Level A/B Testing","pos":[1852,1876]},{"pos":[1878,1933],"content":"<bpt id=\"p1\">*</bpt>Global Level A/B Testing<ept id=\"p1\">*</ept> enables two major scenarios:"},{"pos":[1937,2100],"content":"It allows certain feature hypothesis to be practically verified or proved, typically via a collaboration of <bpt id=\"p1\">**</bpt>the feature stakeholder, feature PM and developers<ept id=\"p1\">**</ept>."},{"pos":[2103,2165],"content":"It allows <bpt id=\"p1\">**</bpt>engineering team<ept id=\"p1\">**</ept> to roll out a feature smoothly."},{"content":"Design Principles:","pos":[2171,2189]},{"pos":[2194,2330],"content":"Keep things <bpt id=\"p1\">**</bpt>simpler<ept id=\"p1\">**</ept> if possible, a single API <ph id=\"ph1\">`Experiment.IsEnabledAsync`</ph> could be used on client (JavaScript) and server (C#) side."},{"content":"Make it simpler for developers to test and see features on/off side-by-side.","pos":[2334,2410]},{"pos":[2414,2637],"content":"Users should be <bpt id=\"p1\">**</bpt>affinitized<ept id=\"p1\">**</ept>, which means once a user saw a feature X turned on, he/she should always see X unless the browser session info has been explicitly wiped out (e.g. Ctrl + Shift + Delete or InPrivate Session)."},{"pos":[2641,2790],"content":"Should be <bpt id=\"p1\">**</bpt>fast<ept id=\"p1\">**</ept>, conducting a new test, turning on/off an A/B testing, or updating the split ratio should take effect in <bpt id=\"p2\">**</bpt>less than 30 seconds<ept id=\"p2\">**</ept>."},{"pos":[2794,2840],"content":"Naturally <bpt id=\"p1\">**</bpt>integrated<ept id=\"p1\">**</ept> into BI and Insights."},{"content":"Internal Flow Diagram:","pos":[2846,2868]},{"content":"Sample Code (ECMAScript)","pos":[2912,2936]},{"content":"Real World Example","pos":[3254,3272]},{"content":"Please try this now!","pos":[3274,3294]},{"content":"Open the F12 console and run the following code:","pos":[3295,3343]}],"content":"# A/B Testing\n\n**Content Level A/B Testing:** A/B testing on specific documents or resources.\n\n**Global Level A/B Testing:** A/B testing on a wide scope, for example theme and page layout which applies to all articles in a given site (or specific locale).\n\n   ![](./iceberg.jpg)\n\n## Content Level A/B Testing\n*Content Level A/B Testing* allows **content owners** to self-service, having variants of contents delivered from the same URL, specifying the split ratio and getting the BI statistics.\n\nFor example, writers can have **hello.md** and **hello.experimental.md**, and specify that only 10% of the end users would see the experimental version of the document.\n\n### Design Principles:\n\n1. Keep things **simpler** if possible, avoid over design - especially piling up features that are not actually used.\n2. All **types of contents** should be able to run A/B testing, including markdown files, plain HTML files, images and audio/video files.\n3. The A/B testing **granularity** should be flexible, either covering a single document, or a large group of assets (e.g. images).\n4. Users should be **affinitized**, which means once a user was routed to version A, he/she should always see version A document unless the browser session info has been explicitly wiped out (e.g. Ctrl + Shift + Delete or InPrivate Session).\n5. Should be **fast**, creating a new test, turning on/off an A/B testing, or updating the split ratio should take effect in **less than 30 seconds**.\n6. **Corner cases should be covered properly**, A/B testing should work smoothly in a **CDN environment**. Also, special logic should be in place to make sure only the default variant *\"the A version\"* is retrieved by **search crawlers** like Google and Bing.\n7. Naturally **integrated** into BI and Insights.\n\n### Internal Flow Diagram:\n\n   ![](./content-ab-testing-flow.png)\n\n## Global Level A/B Testing\n\n*Global Level A/B Testing* enables two major scenarios:\n\n- It allows certain feature hypothesis to be practically verified or proved, typically via a collaboration of **the feature stakeholder, feature PM and developers**.\n- It allows **engineering team** to roll out a feature smoothly.\n\n### Design Principles:\n\n1. Keep things **simpler** if possible, a single API `Experiment.IsEnabledAsync` could be used on client (JavaScript) and server (C#) side.\n2. Make it simpler for developers to test and see features on/off side-by-side.\n3. Users should be **affinitized**, which means once a user saw a feature X turned on, he/she should always see X unless the browser session info has been explicitly wiped out (e.g. Ctrl + Shift + Delete or InPrivate Session).\n4. Should be **fast**, conducting a new test, turning on/off an A/B testing, or updating the split ratio should take effect in **less than 30 seconds**.\n5. Naturally **integrated** into BI and Insights.\n\n### Internal Flow Diagram:\n\n   ![](./global-ab-testing-flow.png)\n\n### Sample Code (ECMAScript)\n\n```javascript\nExperiment.IsEnabledAsync('your_cool_feature_name_or_id').done(function(fEnabled){\n    if (fEnabled) {\n        // do something, in case the experiment is ON for this specific session\n    } else {\n        // do something else, in case the experiment is OFF for this specific session\n    }\n});\n```\n\n#### Real World Example\n\nPlease try this now! Open the F12 console and run the following code:\n\n```javascript\nExperiment.IsEnabledAsync('use_super_large_font').done(function(fEnabled){\n    document.body.style['font-size'] = fEnabled ? '300%' : '150%';\n});\n```\n"}